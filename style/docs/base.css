/**
 * Document Base Styles
 * For markdown-to-HTML documents rendered to PDF
 * Imports: tokens.css (must be loaded first)
 */

@import url('../tokens.css');

/* ========================================
   PRINT CONFIGURATION
   ======================================== */

@page {
  size: letter;
  margin: var(--print-margin);
}

@media print {
  body {
    font-size: var(--fs-md);
    margin: 0;
    padding: 0;
  }

  /* Prevent orphans/widows */
  p, li {
    widows: 2;
    orphans: 2;
  }

  /* Avoid breaks after headings */
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }

  /* Avoid breaks inside blocks */
  table,
  figure,
  .callout,
  .stat-box,
  .use-case,
  .comparison-grid,
  .columns,
  .footnotes {
    page-break-inside: avoid;
  }

  /* Manual page break utility */
  .pagebreak {
    page-break-before: always;
  }

  /* Remove backgrounds for print economy */
  * {
    background: transparent !important;
    box-shadow: none !important;
  }

  /* Preserve intentional backgrounds */
  .callout,
  .stat-box,
  .use-case,
  .comparison-card {
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }
}

/* ========================================
   BASE TYPOGRAPHY
   ======================================== */

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  font-size: var(--fs-md);
  line-height: var(--lh-base);
  color: var(--color-body);
  max-inline-size: 100%;
}

/* Heading hierarchy - semantic sizing + spacing */
h1, h2, h3, h4, h5, h6 {
  font-weight: var(--fw-semibold);
  margin-block-start: var(--space-2xl);
  margin-block-end: var(--space-md);
  color: var(--color-primary);
  line-height: var(--lh-tight);
}

h1 {
  font-size: var(--fs-3xl);
  font-weight: var(--fw-bold);
  border-block-end: var(--border-width-thick) solid var(--color-accent);
  padding-block-end: var(--space-sm);
  margin-block-end: var(--space-xl);
}

h2 {
  font-size: var(--fs-2xl);
  margin-block-start: var(--space-2xl);
  padding-inline-start: var(--space-sm);
  border-inline-start: var(--border-width-accent) solid var(--color-accent);
}

h3 {
  font-size: var(--fs-xl);
}

h4 {
  font-size: var(--fs-lg);
}

h5, h6 {
  font-size: var(--fs-md);
  font-weight: var(--fw-semibold);
}

/* Emphasis */
strong, b {
  font-weight: var(--fw-semibold);
  color: var(--color-primary);
}

em, i {
  font-style: italic;
}

/* Links */
a {
  color: var(--color-accent);
  text-decoration: none;
  transition: text-decoration var(--transition-fast);
}

a:hover {
  text-decoration: underline;
}

@media print {
  a {
    color: var(--color-body);
    text-decoration: none;
  }

  a[href^="http"]:after {
    content: " (" attr(href) ")";
    font-size: var(--fs-xs);
    color: var(--color-text-tertiary);
  }
}

/* Horizontal rules - semantic dividers */
hr {
  border: none;
  border-block-start: var(--border-width-base) solid var(--color-earthstone-gray);
  margin-block: var(--space-xl);
}

/* ========================================
   CODE & PREFORMATTED
   ======================================== */

pre, code {
  font-family: 'SF Mono', Monaco, Consolas, 'Courier New', monospace;
  font-size: var(--fs-xs);
  background-color: var(--surface-subtle);
  border-radius: var(--radius-sm);
}

code {
  padding: var(--space-3xs) var(--space-2xs);
  color: var(--color-primary);
}

pre {
  padding: var(--space-md);
  overflow-x: auto;
  margin-block: var(--space-md);
}

pre code {
  padding: 0;
  background-color: transparent;
}

/* ========================================
   LISTS - Chunked for readability
   ======================================== */

ul, ol {
  margin-inline-start: var(--space-lg);
  padding-inline-start: 0;
  margin-block: var(--space-md);
}

li {
  margin-block-end: var(--space-xs);
  line-height: var(--lh-relaxed);
}

/* Nested lists - reduce spacing */
li > ul,
li > ol {
  margin-block-start: var(--space-xs);
  margin-block-end: var(--space-xs);
}

/* ========================================
   BLOCKQUOTES
   ======================================== */

blockquote {
  border-inline-start: var(--border-width-accent) solid var(--color-sand);
  padding: var(--space-md);
  margin-block: var(--space-md);
  font-style: italic;
  color: var(--color-text-secondary);
}

blockquote > *:first-child {
  margin-block-start: 0;
}

blockquote > *:last-child {
  margin-block-end: 0;
}

/* ========================================
   TABLES
   ======================================== */

table {
  inline-size: 100%;
  border-collapse: collapse;
  margin-block: var(--space-lg);
  font-size: var(--fs-sm);
}

thead {
  background-color: var(--color-primary);
  color: white;
  font-weight: var(--fw-semibold);
}

thead th {
  padding: var(--space-sm);
  text-align: start;
  border: none;
}

tbody tr {
  border-block-end: var(--border-width-thin) solid var(--surface-subtle);
}

tbody tr:nth-child(even) {
  background-color: var(--surface-muted);
}

tbody td {
  padding: var(--space-xs) var(--space-sm);
  vertical-align: top;
}

table strong {
  color: var(--color-highlight);
  font-weight: var(--fw-bold);
}

/* ========================================
   CALLOUTS - Gestalt proximity grouping
   ======================================== */

.callout {
  border-inline-start: var(--border-width-accent) solid var(--color-accent);
  background-color: var(--surface-subtle);
  padding: var(--space-lg);
  margin-block: var(--space-lg);
  page-break-inside: avoid;
}

.callout-title {
  font-weight: var(--fw-bold);
  font-size: var(--fs-lg);
  color: var(--color-primary);
  margin-block-end: var(--space-md);
}

.callout-note {
  border-inline-start-color: var(--color-accent);
}

.callout-tip {
  border-inline-start-color: var(--color-sand);
}

.callout-important {
  border-inline-start-color: var(--color-highlight);
  background-color: #fef5f9;
}

.callout-important .callout-title {
  color: #c91667;
}

/* ========================================
   STAT BOXES - Information chunking
   ======================================== */

.stat-container {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-md);
  margin-block: var(--space-lg);
}

.stat-box {
  background: linear-gradient(135deg, #d9f0e2, #e6f5ec);
  border-inline-start: var(--border-width-accent) solid var(--color-accent);
  padding: var(--space-lg);
  display: flex;
  flex-direction: column;
  min-inline-size: 5rem;
  flex: 1 1 auto;
  page-break-inside: avoid;
}

.stat-value {
  font-size: var(--fs-3xl);
  font-weight: var(--fw-bold);
  color: var(--color-accent);
  line-height: var(--lh-tight);
}

.stat-label {
  font-size: var(--fs-sm);
  color: var(--color-body);
  margin-block-start: var(--space-xs);
}

/* ========================================
   USE CASES
   ======================================== */

.use-case {
  background-color: var(--surface-base);
  border: var(--border-width-base) solid var(--color-earthstone-gray);
  border-radius: var(--radius-md);
  padding: var(--space-lg);
  margin-block: var(--space-lg);
  page-break-inside: avoid;
}

.use-case-title {
  font-size: var(--fs-xl);
  font-weight: var(--fw-bold);
  color: var(--color-primary);
  margin-block-end: var(--space-md);
  padding-block-end: var(--space-sm);
  border-block-end: var(--border-width-base) solid var(--color-earthstone-gray);
}

.use-case-metric {
  font-size: var(--fs-2xl);
  font-weight: var(--fw-bold);
  color: var(--color-accent);
  margin-block: var(--space-md);
}

/* ========================================
   LAYOUTS - Responsive columns
   ======================================== */

.columns {
  display: flex;
  gap: var(--space-xl);
  margin-block: var(--space-lg);
  page-break-inside: avoid;
}

@media print {
  .columns {
    display: grid;
    grid-template-columns: 1fr 1fr;
  }
}

.column {
  flex: 1;
}

.comparison-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--space-lg);
  margin-block: var(--space-lg);
  page-break-inside: avoid;
}

.comparison-card {
  background-color: var(--surface-subtle);
  padding: var(--space-lg);
  border-block-start: var(--border-width-thick) solid var(--color-accent);
  page-break-inside: avoid;
}

.comparison-card h3 {
  color: var(--color-primary);
  font-size: var(--fs-lg);
  margin-block-start: 0;
}

.comparison-card.highlight {
  border-block-start-color: var(--color-highlight);
  background-color: #fff5f9;
}

/* ========================================
   TITLE BLOCK
   ======================================== */

.title-block-header {
  background: linear-gradient(135deg, var(--color-primary), #0d2538);
  color: white;
  padding: var(--space-lg) var(--space-xl);
  margin-block-end: var(--space-lg);
  page-break-after: avoid;
}

.title-block-header .title {
  font-size: var(--fs-2xl);
  font-weight: var(--fw-bold);
  margin-block-end: var(--space-xs);
  color: white;
}

.title-block-header .subtitle {
  font-size: var(--fs-lg);
  opacity: 0.9;
  color: white;
}

.title-block-header .date {
  font-size: var(--fs-sm);
  opacity: 0.8;
  margin-block-start: var(--space-xs);
  color: white;
}

.title-block-header .website {
  font-size: var(--fs-sm);
  margin-block-start: var(--space-xs);
  opacity: 0.9;
}

.title-block-header .website a {
  color: white;
  text-decoration: none;
}

.title-block-header .website a:hover {
  text-decoration: underline;
}

/* ========================================
   FOOTER
   ======================================== */

.footer-content {
  text-align: center;
  font-size: var(--fs-xs);
  color: var(--color-text-tertiary);
  margin-block-start: var(--space-2xl);
  padding-block-start: var(--space-lg);
  border-block-start: var(--border-width-thin) solid var(--color-earthstone-gray);
}

/* ========================================
   CITATIONS & REFERENCES
   ======================================== */

.footnote-ref,
sup a {
  color: var(--color-highlight);
  font-weight: var(--fw-semibold);
  text-decoration: none;
}

.footnote-ref:hover,
sup a:hover {
  text-decoration: underline;
}

.footnotes,
#refs {
  margin-block-start: var(--space-2xl);
  padding-block-start: var(--space-lg);
  border-block-start: var(--border-width-base) solid var(--color-earthstone-gray);
  font-size: var(--fs-xs);
  line-height: var(--lh-base);
  page-break-inside: avoid;
}

.footnotes hr {
  display: none;
}

.footnotes ol {
  padding-inline-start: var(--space-xl);
  margin-inline-start: 0;
}

.footnotes li {
  margin-block-end: var(--space-sm);
}

.references .csl-entry {
  margin-block-end: var(--space-sm);
}

.csl-left-margin {
  float: left;
  padding-inline-end: var(--space-sm);
  color: var(--color-highlight);
  font-weight: var(--fw-semibold);
}

.csl-right-inline {
  margin-inline-start: 2em;
}
